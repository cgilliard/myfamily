steps:
  - script: |
      ./configure
      make clean testsan
    displayName: macOS Test
    condition: eq( variables['Agent.OS'], 'Darwin' )
  - script: |
      ./configure
      export ASAN_OPTIONS=detect_leaks=1:exitcode=1
      make clean testsan
    displayName: Linux Test
    condition: eq( variables['Agent.OS'], 'Linux' )
  - script: |
      ./scripts/build_docs.sh $(MyFamilyPat) $(Build.SourceVersion)
    displayName: PipelineBot
    condition: and(eq( variables['Agent.OS'], 'Linux' ), and(succeeded(), in(variables['Build.Reason'], 'Manual', 'Schedule')))
