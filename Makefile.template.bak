CC=gcc
CC_FLAGS=-I..\
	 -I/Users/christophergilliard/homebrew/Cellar/criterion/2.4.2/include\
	 -lcriterion\
	 -L/Users/christophergilliard/homebrew/Cellar/criterion/2.4.2/lib
CC_TEST_FLAGS=-lcriterion -L/Users/christophergilliard/homebrew/Cellar/criterion/2.4.2/lib
SOURCES := $(patsubst %.c,%.o,$(wildcard *.c))
HEADERS := $(wildcard *.h) $(wildcard parser/*.h) $(wildcard util/*.h)

%.o : %.c $(HEADERS)
	$(CC) $(CC_FLAGS) -c -o $@ $<
all: $(OBJS)
test: test.c
	mkdir -p bin
	rm -rf bin/test
	$(CC) $(CC_TEST_FLAGS) -o bin/test test.c
	./bin/test
	rm -rf bin/test
clean:
	rm -rf *.o
